<html>
    <head>
        <link rel="stylesheet" type="text/css" href="../../res/css/main.css">
        <title> Packing Application </title>
        <h1> Packing an Application </h1>
        <hr>
    </head> 
    
    <body>             
		<h3> Introduction </h3>
		Compile a programm means translate it in an other language ( e.g. C to assembly, or Java to Bytecode ). <br>
		When compiling an application for Android, our target-language is the Dalvik Bytecode. <br>
		The compiled program is stored in a file *.dex.
		Android applications are packaged in .apk format and stored int the /data/app folder on the Android OS. <br>
		APK package contains the .dex files, resource files and so on. <br>
		
		<h3>Structure of a DEX file</h3>
		<ul>
			<li>
				<b>Header</b>
			</li>
			<li>
				<b>Constant Pool</b>
				<ul>
					<li> References to other classes </li>
					<li> Method names </li>
					<li> Numerical constants </li>	
				</ul>
			</li>
			<li>
				<b>Classes definition</b>
				<ul>
					<li> Access flags </li>
					<li> Class names </li>
				</ul>
			</li>
			<li>
				<b>Data</b>
				<ul>
					<li> Method code </li>
					<li> Info related to methods </li>
					<li> Variables </li>
				</ul>
			</li>
		</ul>
>>>>>>> 85447459cce3dcdb9b4f7412bda414e2f3bce2aa

		<h3> Building an APK file </h3>
		Application Package File (APK) is the file format used to distribute and install application on Android. <br>
		Any program, to run on Android, needs to be packed in an apk file. <br>
		The apk files contains the application code, the dex file, and all the resources needed.<br>
		Those information are stored in a special JAR file ( using ZIP ), with ".apk" as file extensions.<br>
		The application can be compiled using the ADT plugin. <br>
		After this, the apk needs to be signed, using Jarsigner, and aligned, using Zipalign.

		<h3> Runtime through the Dalvik Virtual Machine </h3>
		<table>
			<tr>
				<td width=50%>
					<img src="../../res/imgs/dvm_working.png" 
						 alt="DVM working concept"
						 width=100% > 
				</td>
				<td>
					A compiled program is loaded by the DVM and unpacked. <br>
					Application memory is divided in various sections ( like the 8086 segments ).
					<ul>
						<li>
							Stack Section
						</li>
						<li>
							Data Section
						</li>
						<li>
							BSS Section <br>
							( A special Part of the data segment, for statically-allocated variables. )
						</li>
						<li>
							Text Section
							( A special segment for strings treatment
						</li>
					</ul>
				</td>
			</tr>	
		</table>
    </body>
<html>
